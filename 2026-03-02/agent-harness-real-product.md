# Agent Harness æ‰æ˜¯çœŸæ­£çš„äº§å“ï¼šClaude Code / Cursor / Manus / Devin æ¶æ„æ·±åº¦å¯¹æ¯”

> **TL;DR**: æ‰€æœ‰äººéƒ½åœ¨è®¨è®ºæ¨¡å‹ï¼Œæ²¡äººè®¨è®ºè„šæ‰‹æ¶ã€‚ä½†æ•°æ®è¯´æ˜ä¸€åˆ‡ï¼š**Claude Opus 4.5 æ¢äº† scaffoldï¼Œä» 42% è·³åˆ° 78%ã€‚Cursor æ‡’åŠ è½½çœäº† 47% tokenã€‚Vercel åˆ æ‰ 80% å·¥å…·åï¼ŒAgent ä»å¤±è´¥å˜æˆæˆåŠŸã€‚** åŒä¸€ä¸ªæ¨¡å‹ï¼Œå”¯ä¸€å˜é‡æ˜¯ Harnessã€‚æœ¬æ–‡æ·±åº¦æ‹†è§£ Claude Codeã€Cursorã€Manusã€Devinã€SWE-Agent çš„ Harness è®¾è®¡ï¼Œæ­ç¤ºæ‰€æœ‰é¡¶çº§ Agent éƒ½æ”¶æ•›åˆ°çš„å…±åŒæ¨¡å¼ï¼š**æ¸è¿›å¼æŠ«éœ²ï¼ˆProgressive Disclosureï¼‰**ã€‚

---

## ğŸ“¸ å°é¢

![Agent Harness is the Real Product](agent-harness-cover.jpg)

## ğŸ¯ ä»€ä¹ˆæ˜¯ Agent Harnessï¼Ÿ

Harrison Chaseï¼ˆLangChainï¼‰çš„å®šä¹‰æœ€æ¸…æ™°ï¼š

> "æ¡†æ¶æ˜¯æŠ½è±¡... æ²¡ä»€ä¹ˆä¸»è§ã€‚Harness åˆ™æ˜¯å¼€ç®±å³ç”¨çš„ã€‚"

Harness = æ¨¡å‹ä¹‹å¤–è®©å®ƒæœ‰ç”¨çš„ä¸€åˆ‡ï¼šæ‰§è¡Œå¾ªç¯ã€å·¥å…·å®šä¹‰ã€é”™è¯¯æ¢å¤ã€çŠ¶æ€ç®¡ç†ã€ä¿¡æ¯æµã€‚**æ¨¡å‹å†³å®šåšä»€ä¹ˆï¼ŒHarness å†³å®šæ¨¡å‹èƒ½çœ‹åˆ°ä»€ä¹ˆã€èƒ½ç”¨ä»€ä¹ˆå·¥å…·ã€å¤±è´¥äº†æ€ä¹ˆåŠã€‚**

æ‰€æœ‰ç”Ÿäº§çº§ Agent éƒ½æ”¶æ•›åˆ°åŒä¸€ä¸ªæ ¸å¿ƒå¾ªç¯ï¼š

```
while (model returns tool calls):
    execute tool â†’ capture result â†’ append to context â†’ call model again
```

Claude Codeã€Cursorã€Manus çš„æ•´ä¸ªæ¶æ„éƒ½åœ¨è¿™ä¸ªå¾ªç¯é‡Œã€‚å·¥ç¨‹é‡åœ¨å®ƒ**å‘¨å›´**çš„ä¸œè¥¿ã€‚

## ğŸ“Š é“è¯ï¼šScaffold > Model

| å®éªŒ | ç»“æœ |
|------|------|
| Claude Opus 4.5 æ¢ scaffold | **42% â†’ 78%**ï¼ˆCORE-Benchï¼‰ |
| Sonnet 4 æ¢ scaffold | 33% â†’ 47% |
| Sonnet 4.5 æ¢ scaffold | 44% â†’ 62% |
| Cursor æ‡’åŠ è½½ MCP å·¥å…· | **47% token å‡å°‘** |
| Vercel åˆ  80% å·¥å…· | token 145Kâ†’67Kï¼Œæ­¥éª¤ 100â†’19ï¼Œå»¶è¿Ÿ 724sâ†’141sï¼Œ**ä»å¤±è´¥åˆ°æˆåŠŸ** |
| LangChain deepagents-cli | 52.8% â†’ 66.5%ï¼ˆä»…æ”¹ harnessï¼‰ |

**åŒä¸€ä¸ªæ¨¡å‹ã€‚å”¯ä¸€å˜é‡æ˜¯ harnessã€‚**

## ğŸ—ï¸ å„å®¶ Harness è®¾è®¡

### Claude Codeï¼š"æ¨¡å‹æ§åˆ¶å¾ªç¯"

- **å¾ªç¯**ï¼šå†…éƒ¨ä»£å· `n0`ï¼Œç®€å•çš„ `while(tool_call)` å¾ªç¯ã€‚æ—  DAG ç¼–æ’ï¼Œæ— å¤šäººæ ¼ã€‚
- **å·¥å…·**ï¼š~18 ä¸ªåŸè¯­ï¼Œå››ç±»ï¼šå‘½ä»¤è¡Œæ¢ç´¢ï¼ˆBashã€Globã€Grepã€LSï¼‰ã€æ–‡ä»¶äº¤äº’ï¼ˆReadã€Writeã€Editï¼‰ã€Web è®¿é—®ã€ç¼–æ’ï¼ˆTodoWriteã€Taskï¼‰
- **é€‰æ‹© regex è€Œéå‘é‡æ•°æ®åº“**ï¼šClaude ç†è§£ä»£ç èƒ½åŠ›è¶³å¤Ÿï¼Œç”¨ ripgrep å°±è¡Œ
- **6 å±‚ä¿¡æ¯åŠ è½½**ï¼šç»„ç»‡ç­–ç•¥ â†’ CLAUDE.md â†’ ç”¨æˆ·è®¾ç½® â†’ MEMORY.md â†’ ä¼šè¯å†å² â†’ git çŠ¶æ€
- **TodoWrite çš„ç§˜å¯†**ï¼š**åŠŸèƒ½ä¸Šä»€ä¹ˆéƒ½ä¸åš**ã€‚å®ƒæ˜¯çº¯ harness çº§æŠ€å·§ â€” ä¸€ä¸ªç©ºæ“ä½œå·¥å…·ï¼Œå¼ºè¿« Agent è¡¨è¾¾å’Œè¿½è¸ªè®¡åˆ’ï¼Œåœ¨é•¿è½¨è¿¹ä¸­ä¿æŒæ–¹å‘
- **å·¥å…·ç»“æœæ³¨å…¥ç³»ç»Ÿæé†’**ï¼šæ¯æ¬¡å·¥å…·æ‰§è¡Œåé™„åŠ å›ºå®šæ–‡æœ¬ï¼Œæ¯”ä»…æ”¾åœ¨ system prompt ä¸­æ›´æœ‰æ•ˆ

### Cursorï¼š"æ–‡ä»¶æ˜¯åŸºæœ¬åŸè¯­"

- **ä¸ºæ¯ä¸ªå‰æ²¿æ¨¡å‹è°ƒä¼˜ harness**ï¼šä¸åŒæ¨¡å‹ç”¨ä¸åŒå·¥å…·åã€æç¤ºæŒ‡ä»¤
- **æ–‡ä»¶å³ä¸€åˆ‡**ï¼šå¯æœç´¢ï¼ˆripgrepï¼‰ã€å¯åˆ†ç»„ï¼ˆä¸€ä¸ªæ–‡ä»¶å¤¹ä¸€ä¸ª MCP serverï¼‰ã€å¯ç‰ˆæœ¬åŒ–
- **è‡ªå®šä¹‰è¯­ä¹‰æœç´¢**ï¼šç”¨ Agent session traces è®­ç»ƒ embedding model â€” åˆ†æå“ªäº›æ–‡ä»¶åº”è¯¥è¢«æ›´æ—©æ£€ç´¢ â†’ æœç´¢å‡†ç¡®åº¦ +12.5%
- **æ‡’åŠ è½½ MCP å·¥å…·**ï¼šåªç»™ Agent å·¥å…·åï¼Œå®Œæ•´å®šä¹‰æŒ‰éœ€è·å– â†’ **47% token å‡å°‘**

### Manusï¼š"KV-Cache è‡³ä¸Š"

- **é‡å†™äº† 5 æ¬¡æ¡†æ¶**ã€‚å¹³å‡ input:output token æ¯” = 100:1
- **Logit masking è€Œéå·¥å…·å¢åˆ **ï¼šåŠ¨æ€æ”¹å·¥å…·å®šä¹‰ä¼šç ´å KV-cacheã€‚æ‰€ä»¥ ~29 ä¸ªå·¥å…·æ°¸è¿œåŠ è½½ï¼Œé€šè¿‡**è¾“å‡º token æ¦‚ç‡çº¦æŸ**æ§åˆ¶å¯ç”¨æ€§
- **ä¸‰çº§åŠ¨ä½œç©ºé—´**ï¼šL1ï¼ˆ~20 ä¸ªåŸå­å·¥å…·ï¼‰ã€L2ï¼ˆbash è°ƒç”¨ grep/ffmpeg/mcp-cliï¼‰ã€L3ï¼ˆåŠ¨æ€è„šæœ¬ï¼‰
- **æœ€å¤§æ•™è®­**ï¼š"å¦‚æœä½ çš„ Agent harness åœ¨æ¨¡å‹å˜å¼ºæ—¶å˜å¾—æ›´å¤æ‚ï¼Œè¯´æ˜å“ªé‡Œä¸å¯¹"
- **todo.md é‡å†™æ¨¡å¼**ï¼šæŠŠå…¨å±€è®¡åˆ’æ¨å…¥æœ€è¿‘æ³¨æ„åŠ›çª—å£ï¼Œå¯¹æŠ— "lost in the middle"

### SWE-Agentï¼š"Agent-Computer Interface"

- **Linter é—¨æ§ç¼–è¾‘**ï¼šAgent æäº¤ç¼–è¾‘ â†’ è‡ªåŠ¨è·‘ linter â†’ è¯­æ³•ä¸å¯¹å°±æ‹’ç» â†’ æ²¡æœ‰è¿™ä¸ªï¼Œæ€§èƒ½**é™ 3%**
- **è§‚å¯Ÿå‹ç¼©**ï¼šåªä¿ç•™æœ€è¿‘ 5 æ­¥çš„å®Œæ•´ç»†èŠ‚ï¼Œæ›´æ—©çš„å‹ç¼©æˆä¸€è¡Œæ‘˜è¦

### å…¶ä»–

| Agent | å…³é”®è®¾è®¡ |
|-------|---------|
| **Devin** | éš”ç¦»äº‘ VM + Playbook ç³»ç»Ÿ + çŸ¥è¯†ç®¡ç† â†’ PR åˆå¹¶ç‡ 34% â†’ **67%** |
| **Windsurf** | åŒ Agentï¼šè§„åˆ’ Agent åå°æŒç»­è¿è¡Œ + æ‰§è¡Œ Agent å‰å°æ“ä½œ |
| **Aider** | PageRank ä»“åº“åœ°å›¾ â€” ç”¨ tree-sitter è§£æä»£ç  â†’ æ„å»ºä¾èµ–å›¾ â†’ PageRank æ’åº â†’ äºŒåˆ†æœç´¢å¡« token é¢„ç®— |
| **Replit** | å• Agent â†’ ä¸‰ Agentï¼ˆManagerã€Editorã€Verifierï¼‰+ è‡ªæ„ˆå¾ªç¯ |

## ğŸ”‘ æ¸è¿›å¼æŠ«éœ²ï¼ˆProgressive Disclosureï¼‰

å€Ÿè‡ª UI/UX è®¾è®¡ï¼ˆJakob Nielsen 1990sï¼‰ï¼š**åªå±•ç¤ºå½“å‰éœ€è¦çš„ï¼Œå¤æ‚æ€§æŒ‰éœ€æ­ç¤ºã€‚**

å¯¹ Agent è®¾è®¡çš„æ˜ å°„ï¼šæŠ˜å èœå•å‡å°‘äººç±»è®¤çŸ¥è´Ÿæ‹… â†’ åˆ†å±‚ä¸Šä¸‹æ–‡åŠ è½½å‡å°‘ LLM æ³¨æ„åŠ›ç¢ç‰‡åŒ–ã€‚

### å„å®¶å®ç°

| ç³»ç»Ÿ | å®ç°æ–¹å¼ |
|------|---------|
| **Claude Code** | Skill æ–‡ä»¶ä¸é¢„åŠ è½½ï¼Œä»…åœ¨æ£€æµ‹åˆ°ç›¸å…³æ€§æ—¶è¯»å– |
| **Cursor** | MCP å·¥å…·åªæš´éœ²åç§°ï¼Œå®Œæ•´å®šä¹‰æŒ‰éœ€è·å– |
| **Manus** | æ–‡ä»¶ç³»ç»Ÿå¸è½½ â€” ä¿ç•™ URL/è·¯å¾„ï¼Œå†…å®¹æŒ‰éœ€è¯»å–ï¼›todo.md æ¨å…¥æœ€è¿‘æ³¨æ„åŠ› |

### æ•°æ®æ”¯æŒ

| æ¥æº | å¯¹æ¯” | æ”¹å–„ |
|------|------|------|
| Claude-Mem | é™æ€åŠ è½½ 25,000 tokenï¼ˆ0.8% æœ‰æ•ˆï¼‰vs æ¸è¿›å¼ 955 tokenï¼ˆ100% æœ‰æ•ˆï¼‰ | **26x** |
| Cursor | æ‡’åŠ è½½ vs å…¨åŠ è½½ | **47% token å‡å°‘** |
| Vercel | åˆ  80% å·¥å…· | **80% å»¶è¿Ÿé™ä½ + ä»å¤±è´¥åˆ°æˆåŠŸ** |

### ä¸ºä»€ä¹ˆå¿…é¡»è¿™æ ·

Liu et al.ï¼ˆTACL 2024ï¼‰è¯æ˜ LLM æ€§èƒ½å‘ˆ **U å‹æ›²çº¿** â€” ä¿¡æ¯åœ¨å¼€å¤´æˆ–ç»“å°¾æ—¶æ€§èƒ½æœ€é«˜ï¼Œåœ¨ä¸­é—´æ—¶ä¸‹é™ã€‚**å³ä½¿æ˜¯é•¿ä¸Šä¸‹æ–‡æ¨¡å‹ä¹Ÿè¿™æ ·ã€‚**

æ¸è¿›å¼æŠ«éœ²çš„ä½œç”¨ï¼š
1. **è¾“å…¥ä¿æŒå°** â†’ U å‹å¤±çœŸå°
2. **æ–°æ£€ç´¢çš„ä¿¡æ¯æ”¾åœ¨æœ«å°¾** â†’ é«˜æ³¨æ„åŠ›åŒºåŸŸ

## ğŸ¤ è¡Œä¸šå…±è¯† vs åˆ†æ­§

### å…±è¯† âœ…
- å•ä¸€æ‰å¹³å¾ªç¯ > å¤æ‚ç¼–æ’
- æ–‡ä»¶ç³»ç»Ÿä½œä¸ºæ‰©å±•è®°å¿†
- é”™è¯¯ä¿ç•™è€Œéæ¸…ç†
- å‡è§„åˆ’å·¥å…·ï¼ˆTodoWriteã€todo.mdï¼‰ä¿æŒè¿è´¯
- åŸè¯­ï¼ˆbashã€grepï¼‰> è‡ªå®šä¹‰é›†æˆ

### åˆ†æ­§ âš”ï¸

| é—®é¢˜ | æ–¹æ¡ˆ A | æ–¹æ¡ˆ B |
|------|--------|--------|
| å·¥å…·è¿‡è½½ | Manusï¼šlogit maskingï¼ˆå…¨åŠ è½½ï¼Œçº¦æŸè¾“å‡ºï¼‰ | Cursorï¼šæ‡’åŠ è½½ï¼ˆæŒ‰éœ€åŠ è½½å®šä¹‰ï¼‰ |
| Harness vs é•¿ä¸Šä¸‹æ–‡ | Googleï¼šç»™æ¨¡å‹ä¸€åˆ‡ï¼ˆ2M tokenï¼‰ | å…¶ä»–æ‰€æœ‰äººï¼šä¸»åŠ¨è¿‡æ»¤+åˆ†é˜¶æ®µ |

### æœªè§£ â“
- æ²¡æœ‰æ ‡å‡† benchmark æ¯”è¾ƒ harness è®¾è®¡
- ä½•æ—¶å…±äº« vs éš”ç¦» sub-agent çŠ¶æ€ä»é ç»éªŒ
- Cursor 47% æ˜¯ä»…æœ‰çš„å‡ ä¸ªå…¬å¼€æ•°å­—ä¹‹ä¸€

## ğŸ’¡ æ ¸å¿ƒç»“è®º

> **æ¨¡å‹æ˜¯å¼•æ“ã€‚Harness æ˜¯æ•´è¾†è½¦ã€‚æ²¡äººä¹°å¼•æ“ã€‚**

| åŸåˆ™ | è§£é‡Š |
|------|------|
| **å·¥ç¨‹æŠ•å…¥åœ¨ harness ä¸åœ¨æ¨¡å‹é€‰å‹** | Scaffold å·®å¼‚ > æ¨¡å‹å·®å¼‚ |
| **æ¸è¿›å¼æŠ«éœ²æ˜¯æ¶æ„çº§å¿…éœ€** | ä¸æ˜¯ä¼˜åŒ–ï¼Œæ˜¯åŸºç¡€ |
| **è§„åˆ’ harness å˜ç®€å•è€Œéå˜å¤æ‚** | é¡¶çº§å›¢é˜Ÿæ¯æ¬¡é‡å†™éƒ½åœ¨åˆ ä¸œè¥¿ |
| **40% ä¸Šä¸‹æ–‡é˜ˆå€¼** | è¶…è¿‡æ¨¡å‹è¾“å…¥å®¹é‡çš„ 40% â†’ è¿›å…¥"è ¢åŒº" |

## ğŸ”— èµ„æº

- **åŸæ–‡**: <https://x.com/Hxlfed14/status/2028116431876116660>
- **LinkedIn ç‰ˆ**: <https://www.linkedin.com/pulse/your-agents-harness-matters-more-than-its-model-himanshu-sangshetti-32rkf>
- **ä½œè€…**: Himanshu Sangshetti (@Hxlfed14)
- **å¼•ç”¨æ¥æº**: Anthropicã€Cursorã€Manusã€LangChain Deep Agentsã€SWE-Agentï¼ˆNeurIPS 2024ï¼‰ã€Liu et al.ï¼ˆTACL 2024ï¼‰

---

*ä½œè€…: ğŸ¦ å¤§é¾™è™¾*
*æ—¥æœŸ: 2026-03-02*
*æ ‡ç­¾: Agent Harness / Claude Code / Cursor / Manus / Devin / Progressive Disclosure / æ¶æ„ / Scaffold*
